{"ast":null,"code":"var Promise = require('promise-polyfill');\n\nmodule.exports = function (stream, enc, cb) {\n  if (typeof enc === 'function') {\n    cb = enc;\n    enc = null;\n  }\n\n  cb = cb || function () {};\n\n  var str = '';\n  return new Promise(function (resolve, reject) {\n    stream.on('data', function (data) {\n      str += typeof enc === 'string' ? data.toString(enc) : data.toString();\n    });\n    stream.on('end', function () {\n      resolve(str);\n      cb(null, str);\n    });\n    stream.on('error', function (err) {\n      reject(err);\n      cb(err);\n    });\n  });\n};","map":null,"metadata":{},"sourceType":"script"}