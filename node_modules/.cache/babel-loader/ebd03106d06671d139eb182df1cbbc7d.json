{"ast":null,"code":"// **N3Util** provides N3 utility functions.\nvar DataFactory = require('./N3DataFactory');\n\nvar N3Util = {\n  // Tests whether the given term represents an IRI\n  isNamedNode: function isNamedNode(term) {\n    return !!term && term.termType === 'NamedNode';\n  },\n  // Tests whether the given term represents a blank node\n  isBlankNode: function isBlankNode(term) {\n    return !!term && term.termType === 'BlankNode';\n  },\n  // Tests whether the given term represents a literal\n  isLiteral: function isLiteral(term) {\n    return !!term && term.termType === 'Literal';\n  },\n  // Tests whether the given term represents a variable\n  isVariable: function isVariable(term) {\n    return !!term && term.termType === 'Variable';\n  },\n  // Tests whether the given term represents the default graph\n  isDefaultGraph: function isDefaultGraph(term) {\n    return !!term && term.termType === 'DefaultGraph';\n  },\n  // Tests whether the given quad is in the default graph\n  inDefaultGraph: function inDefaultGraph(quad) {\n    return N3Util.isDefaultGraph(quad.graph);\n  },\n  // Creates a function that prepends the given IRI to a local name\n  prefix: function prefix(iri, factory) {\n    return N3Util.prefixes({\n      '': iri\n    }, factory)('');\n  },\n  // Creates a function that allows registering and expanding prefixes\n  prefixes: function prefixes(defaultPrefixes, factory) {\n    // Add all of the default prefixes\n    var prefixes = Object.create(null);\n\n    for (var prefix in defaultPrefixes) {\n      processPrefix(prefix, defaultPrefixes[prefix]);\n    } // Set the default factory if none was specified\n\n\n    factory = factory || DataFactory; // Registers a new prefix (if an IRI was specified)\n    // or retrieves a function that expands an existing prefix (if no IRI was specified)\n\n    function processPrefix(prefix, iri) {\n      // Create a new prefix if an IRI is specified or the prefix doesn't exist\n      if (typeof iri === 'string') {\n        // Create a function that expands the prefix\n        var cache = Object.create(null);\n\n        prefixes[prefix] = function (local) {\n          return cache[local] || (cache[local] = factory.namedNode(iri + local));\n        };\n      } else if (!(prefix in prefixes)) {\n        throw new Error('Unknown prefix: ' + prefix);\n      }\n\n      return prefixes[prefix];\n    }\n\n    return processPrefix;\n  }\n}; // ## Exports\n\nmodule.exports = N3Util;","map":null,"metadata":{},"sourceType":"script"}